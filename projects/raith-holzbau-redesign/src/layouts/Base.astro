---
interface Props {
  title: string;
  /** Key that matches a nav item to set class="active" */
  activeNav: string;
}

const { title, activeNav } = Astro.props;

// import.meta.env.BASE_URL reflects the `base` config option.
// With trailingSlash:'never' Astro returns it WITHOUT a trailing slash,
// but the HTML <base> element only works as a directory when it ends in '/'.
const base = import.meta.env.BASE_URL;
const baseHref = base.endsWith('/') ? base : `${base}/`;

const mainNav = [
  { href: 'index.html',         label: 'Raith Holzbau', key: 'home'         },
  { href: 'ueber-uns.html',     label: 'Über uns',      key: 'ueber-uns'    },
  { href: 'zimmerei.html',      label: 'Zimmerei',      key: 'zimmerei'     },
  { href: 'kranverleih.html',   label: 'Kranverleih',   key: 'kranverleih'  },
  { href: 'dachsanierung.html', label: 'Lohnabbund',    key: 'dachsanierung'},
];

const footerNav = [
  { href: 'kontakt.html',     label: 'Kontakt',     key: 'kontakt'    },
  { href: 'impressum.html',   label: 'Impressum',   key: 'impressum'  },
  { href: 'datenschutz.html', label: 'Datenschutz', key: 'datenschutz'},
];

const pageTitle = title === 'Raith Holzbau'
  ? 'Raith Holzbau'
  : `${title} — Raith Holzbau`;
---
<!DOCTYPE html>
<html lang="de">
<head>
  <!--
    <base> must be the very first tag in <head>.
    It makes ALL relative URLs on this page resolve from BASE_URL,
    so 'css/style.css' → '/projects/raith-holzbau-redesign/css/style.css' etc.
    No need to prefix every individual href/src with the base path.
  -->
  <base href={baseHref} />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{pageTitle}</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="icon" href="favicon.ico" />
  <slot name="head" />
</head>
<body>
  <div id="preload">
    <img src="assets/logo_h.jpg" alt="" />
  </div>
  <div id="body">
    <div id="logo"><a href="index.html">&nbsp;</a></div>
    <div id="top">
      <div id="navi">
        <input type="checkbox" id="nav-toggle" class="nav-toggle" aria-hidden="true" />
        <label for="nav-toggle" class="nav-toggle-label" aria-label="Menü öffnen"><span></span></label>
        <ul class="nav">
          {mainNav.map(item => (
            <li class={activeNav === item.key ? 'active' : undefined}>
              <a href={item.href}>{item.label}</a>
            </li>
          ))}
        </ul>
        <div id="fb">
          <a href="https://de-de.facebook.com/pages/Raith-Holzbau-GmbH-CoKG/203828749636570"
             target="_blank">&nbsp;</a>
        </div>
      </div>
      <div id="banner"></div>
    </div>

    <div id="center">
      <slot />
    </div>

    <div id="footer">
      <ul class="nav">
        {footerNav.map(item => (
          <li class={activeNav === item.key ? 'active' : undefined}>
            <a href={item.href}>{item.label}</a>
          </li>
        ))}
      </ul>
    </div>
  </div>
  <div class="clear"></div>
  <!--
    Using an absolute path for the script src prevents Vite from trying to
    bundle this public-folder file as an ES module at build time.
  -->
  <script is:inline src={`${baseHref}js/scripts.js`}></script>
</body>
</html>
